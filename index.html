<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ - Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</title>
  <style>
    body{background:#000;color:#fff;font-family:'Segoe UI',Tahoma,Verdana,sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;padding:20px}
    .container{background:#111;border:2px solid gold;border-radius:15px;padding:25px;width:100%;max-width:650px;box-shadow:0 0 20px rgba(255,215,0,0.4)}
    h2{text-align:center;color:gold;margin-bottom:20px}
    label{display:block;margin-bottom:6px;font-weight:bold}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .form-group{margin-bottom:18px}
    input,select{width:100%;padding:12px;border-radius:10px;border:1px solid #444;background:#000;color:#fff;font-size:15px}
    input:focus,select:focus{border-color:gold;outline:none;box-shadow:0 0 5px rgba(255,215,0,0.5)}
    button{width:100%;padding:14px;background:gold;color:#000;border:none;border-radius:10px;font-size:18px;font-weight:bold;cursor:pointer}
    button:hover{background:#e6c200}
    .hint{font-size:12px;color:#bbb;margin-top:-8px;margin-bottom:12px}
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ“¦ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ - Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</h2>
    <form id="dynForm">
      <div class="form-group">
        <label for="lang">Language</label>
        <select id="lang" name="language">
          <option value="ar" selected>AR</option>
          <option value="fr">FR</option>
          <option value="en">EN</option>
        </select>
        <div class="hint">Ø§Ø®ØªØ± Ù„ØºØ© Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙŠ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… (AR/FR/EN)</div>
      </div>

      <div class="row">
        <div class="form-group">
          <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
          <input type="text" name="full_name" required>
        </div>
        <div class="form-group">
          <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
          <input type="tel" name="phone" required>
        </div>
      </div>

      <div class="row">
        <div class="form-group">
          <label>Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</label>
          <select id="wilaya" name="wilaya" required>
            <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</option>
          </select>
        </div>
        <div class="form-group">
          <label>Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</label>
          <select id="commune" name="commune" required>
            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</option>
          </select>
        </div>
      </div>

      <button type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
    </form>
  </div>

  <script>
    const DZ_URL = "https://ecotejarah-alt.github.io/algeria-data/dz.json"; // Ø§Ø³ØªØ¨Ø¯Ù„Ù‡ Ø¨Ø±Ø§Ø¨Ø·Ùƒ Ø¨Ø¹Ø¯ Ø§Ù„Ø±ÙØ¹

    const langSel = document.getElementById("lang");
    const wilayaSel = document.getElementById("wilaya");
    const communeSel = document.getElementById("commune");
    let DZ = {};
    let lang = "ar";

    async function loadData(){
      try{
        const data = await (await fetch(DZ_URL)).json();
        DZ = data;
        fillWilayas();
      }catch(err){
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ dz.json:", err);
        alert("ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ dz.json. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· DZ_URL Ø£Ùˆ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„Ù.");
      }
    }

    function wilayaDisplayName(w){
      return w["name_"+lang] || w.name_ar || w.name_fr || w.name_en || "";
    }

    function communeDisplayName(c){
      return c["name_"+lang] || c.name_ar || c.name_fr || c.name_en || "";
    }

    function fillWilayas(){
      wilayaSel.innerHTML = "<option value=''>Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</option>";
      Object.entries(DZ).sort(([a],[b])=>a.localeCompare(b)).forEach(([code,w])=>{
        const opt = document.createElement("option");
        opt.value = code;
        opt.textContent = code + " - " + wilayaDisplayName(w);
        wilayaSel.appendChild(opt);
      });
      communeSel.innerHTML = "<option value=''>Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</option>";
    }

    wilayaSel.addEventListener("change", ()=>{
      communeSel.innerHTML = "<option value=''>Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</option>";
      const code = wilayaSel.value;
      if(!code) return;
      const list = (DZ[code]?.communes) || [];
      list.forEach(c=>{
        const opt = document.createElement("option");
        opt.value = communeDisplayName(c);
        opt.textContent = communeDisplayName(c);
        communeSel.appendChild(opt);
      });
    });

    langSel.addEventListener("change", ()=>{
      lang = langSel.value;
      fillWilayas();
    });

    document.getElementById("dynForm").addEventListener("submit", e=>{
      e.preventDefault();
      const summary = [
        "Ø§Ù„Ù„ØºØ©: " + lang.toUpperCase(),
        "Ø§Ù„Ø§Ø³Ù…: " + e.target.full_name.value,
        "Ø§Ù„Ù‡Ø§ØªÙ: " + e.target.phone.value,
        "Ø§Ù„ÙˆÙ„Ø§ÙŠØ©: " + (wilayaSel.options[wilayaSel.selectedIndex]?.text || ""),
        "Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©: " + (communeSel.value || "")
      ].join("\n");
      alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:\n" + summary);
    });

    loadData();
  </script>
</body>
</html>
